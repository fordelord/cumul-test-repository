import { v4 as uuidv4 } from '@lukeed/uuid';
export const setFilters = (dashboardComponent, iframe, itemId, filters) => {
    if (iframe) {
        const requestId = uuidv4();
        iframe.contentWindow.postMessage({
            action: 'setFilters',
            itemId,
            filters,
            _version: dashboardComponent.VERSION,
            requestId
        }, '*');
        return new Promise((resolve, reject) => {
            dashboardComponent.promises[requestId] = { resolve, reject };
            // Check if promise has been resolved after 2 seconds
            setTimeout(() => {
                if (dashboardComponent.promises[requestId]) {
                    const errorMessage = 'setFilters request timed out.';
                    dashboardComponent.promises[requestId].reject(new Error(errorMessage));
                    delete dashboardComponent.promises[requestId];
                }
            }, 2000);
        });
    }
    return Promise.reject();
};
