import { v4 as uuidv4 } from '@lukeed/uuid';
export const getFilters = (dashboardComponent, iframe) => {
    if (iframe === null || iframe === void 0 ? void 0 : iframe.contentWindow) {
        const requestId = uuidv4();
        iframe.contentWindow.postMessage({ action: 'getFilters', _version: dashboardComponent.VERSION, requestId }, '*');
        return new Promise((resolve, reject) => {
            dashboardComponent.promises[requestId] = { resolve, reject };
            // Check if promise has been resolved after 2 seconds
            setTimeout(() => {
                if (dashboardComponent.promises[requestId]) {
                    const errorMessage = 'getFilters request timed out.';
                    dashboardComponent.promises[requestId].reject(new Error(errorMessage));
                    delete dashboardComponent.promises[requestId];
                }
            }, 2000);
        });
    }
    return Promise.reject(new Error('Cannot retrieve contentWindow.'));
};
